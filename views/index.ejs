<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-2.2.4.js" integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/style.css">
    
    <title>Add a court</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700;900&display=swap');

        *, body {
            font-family: 'Poppins', sans-serif;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
            -moz-osx-font-smoothing: grayscale;
        }

        html, body {
            height: 100%;
            margin-left:15%;
            background-color: #284b61;
            transform: scale(0.85); /* Scale down by 15% */
             transform-origin: top left; /* Set transform origin to top left */
    
            /* overflow: hidden; */
        }

        .form-holder {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background-color: rgb(132, 210, 236);
            min-height: 100vh;
        }

        .form-holder .form-content {
            position: relative;
            text-align: center;
            padding: 60px;
        }

        .form-content .form-items {
            border: 3px solid #fff;
            color:wheat;
            padding: 40px;
            display: inline-block;
            width: 100%;
            min-width: 540px;
            border-radius: 10px;
            text-align: left;
            transition: all 0.4s ease;
        }
        #confirmation{
            padding:20px;
            color :white;
            font-size: larger;
        }

        .form-content h3 {
            color: #fff;
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .form-content p {
            color: #fff;
            font-size: 17px;
            font-weight: 300;
            line-height: 20px;
            margin-bottom: 30px;
        }

        .form-content input[type=text], .form-content input[type=url], .form-content input[type=number], .form-content input[type=checkbox], .form-content input[type=radio], .form-content select {
            width: 100%;
            padding: 9px 20px;
            border: 0;
            border-radius: 6px;
            background-color: #fff;
            font-size: 15px;
            font-weight: 300;
            color: #8D8D8D;
            transition: all 0.3s ease;
            margin-top: 1px;
        }

        .btn-primary {
            background-color: #6C757D;
            outline: none;
            border: 0px;
            box-shadow: none;
        }

        .btn-primary:hover, .btn-primary:focus, .btn-primary:active {
            background-color: #495056;
            outline: none !important;
            border: none !important;
            box-shadow: none;
        }

        .invalid-feedback {
            color: #ff606e;
        }

        .valid-feedback {
            color: #2acc80;
        }
    </style>
</head>
<body>

    <div class="form-body">
        <div class="row">
            <div class="form-holder">
                <div class="form-content">
                    <div class="form-items">
                        <h3 style="color:black">Reserve a court</h3>
                        <h4 style="color:orange">Fill in the details below.</h4>
    
                        <form id="courtForm" novalidate>
                            <div class="col-md-12">
                                <label for="date">Date:</label>
                                <input type="date" class="form-control" id="date" name="date" required>
                            </div>
    
                            <div class="col-md-12"><br>
                                <label for="court_no">Court Number:</label>
                                <select class="form-control" id="court_no" name="court_no" required>
                                    <option value="" disabled selected>Select court number</option>
                                    <option value="1">Court 1</option>
                                    <option value="2">Court 2</option>
                                    <option value="3">Court 3</option>
                                    <option value="4">Court 4</option>
                                    <option value="5">Court 5</option>
                                    <option value="6">Court 6</option>
                                    <option value="7">Court 7</option>
                                    <option value="8">Court 8</option>
                                </select>
                            </div>
    
                            <div class="col-md-12"><br>
                                <label for="type">Court Type:</label>
                                <select class="form-control" id="type" name="type" required>
                                    <option value="" disabled selected>Select court type</option>
                                    <option value="indoor">Indoor</option>
                                    <option value="outdoor">Outdoor</option>
                                </select>
                            </div>
    
                            <div class="col-md-12"><br>
                                <label for="time">Time:</label>
                                <select class="form-control" id="time" name="time" required>
                                    <option value="" disabled selected>Select a time</option>
                                    <option value="08:00">8:00 AM</option>
                                    <option value="09:00">9:00 AM</option>
                                    <option value="10:00">10:00 AM</option>
                                    <option value="11:00">11:00 AM</option>
                                    <option value="12:00">12:00 PM</option>
                                    <option value="13:00">1:00 PM</option>
                                    <option value="14:00">2:00 PM</option>
                                    <option value="15:00">3:00 PM</option>
                                    <option value="16:00">4:00 PM</option>
                                    <option value="17:00">5:00 PM</option>
                                    <option value="18:00">6:00 PM</option>
                                    <option value="19:00">7:00 PM</option>
                                    <option value="20:00">8:00 PM</option>
                                </select>
                            </div>
    
                            <div class="col-md-12"><br>
                                <label for="playerName">Player Name:</label>
                                <input class="form-control" type="text" id="playerName" name="player_name" placeholder="Player name" required>
                            </div><br>
    
                            <div class="form-button mt-3">
                                <button id="submit" type="submit" class="btn btn-primary">Reserve a court</button>
                            </div>
                        </form>
                        <div id="confirmation"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
     <!-- <div class="form-holder">
            <div class="form-content">
                <div class="form-items">
                    <h3>Search for a court</h3>
                    <p>Enter one or more search terms </p>
                    <form id="courtForm" novalidate>
                        <div class="col-md-12">
                            <input class="form-control search" type="text" name="type" placeholder="Type" required>
                        </div>
                        <div class="col-md-12">
                            <input class="form-control search" type="text" name="courttitle" placeholder="court Title">
                        </div>
                        <div class="col-md-12">
                            <input class="form-control search" type="text" name="author" placeholder="Authors (comma-separated)" >
                        </div>
                        <div class="col-md-12">
                            <input class="form-control search" type="number" name="year" placeholder="Publication Year">
                        </div>
                                                
                        <div class="form-button mt-3">
                            <button id="submit" type="submit" class="btn btn-primary">Search</button>
                        </div>
                    </form>
                    <div id="result">
                            <input class="form-control search" type="number" name="year" placeholder="Search result : ">
                            Trouve 
                        </div>
                    
                </div>
            </div>
        </div> -->
    </div>
</div>

<script>

  document.getElementById('courtForm').addEventListener('submit', async function(event) {
        event.preventDefault();

        const formData = new FormData(event.target);

        const data = {
            date: formData.get('date'),
            court_no: formData.get('court_no'),
            type: formData.get('type'),
            time: formData.get('time'),
            status: "Booked", 
            player_name: formData.get('player_name')
        };

        try {
            const response = await fetch('http://localhost:3800/api/post', {  // Ensure this matches your actual endpoint
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            });

            const result = await response.json();
            console.log(result);
            document.getElementById('confirmation').innerHTML=`Merci ${data.player_name}, votre réservations pour le ${data.date} à ${data.time} pour le court no ${data.court_no} est confirmée.`;

        } catch (error) {
            console.log('Error:', error);
            alert('An error occurred while adding the reservation.');
        }
    });
           document.addEventListener("DOMContentLoaded", function() {
            // Get today's date
            let today = new Date();
            // Format the date to YYYY-MM-DD
            let formattedDate = today.toISOString().split('T')[0];
            // Set the date input field value
            document.getElementById('date').value = formattedDate;
        });

    

//     function searchTeams() {
//     // Clear previous results
//     document.getElementById("result").innerHTML = "";
    
//     // Get the search queries from the input
//       var searchQueries = [];

//      searchQueries = document.getElementsByClassName("search");

//      //document.getElementById("id").value.toLowerCase();)
     
//      var getSearchTerm = ()=>{
//      for(s in searchQueries){
        
//         return(s => (s.value.toLowerCase == court.title.toLowerCase || s ==  court.year.toLowerCase || s.toLowerCase == court.type.toLowerCase))
         
//      }
//     }
// // Loop through the array and check for matches
//     for (var i = 0; i < courts.length; i++) {
//         var court = " " +courts[i].toLowerCase(); 
//         if (court.includes(searchQuery)) {
          
//           document.getElementById('result').innerHTML+= '<tr><p style="color:maroon"><u>courtId '+(i+1)+'</u></p>' + court+'</tr>';
        
//         }
  //   }
//}
  

    
</script>
</body>
</html>
